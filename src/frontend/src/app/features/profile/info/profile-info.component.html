<p-toast></p-toast>

<div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 md:p-8">
  <h2 class="text-xl font-bold text-gray-900 mb-6 pb-4 border-b border-gray-100">Hồ sơ của tôi</h2>

  <form [formGroup]="infoForm" (ngSubmit)="onSave()" class="max-w-lg">
    
    <div class="mb-6">
      <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
      <div class="flex items-center px-3 py-3 bg-gray-50 border border-gray-200 rounded-lg text-gray-500 select-none cursor-not-allowed">
        <span class="flex-1 font-medium">{{ emailDisplay }}</span>
        <i class="pi pi-lock text-xs text-gray-400" pTooltip="Không thể thay đổi email"></i>
      </div>
      <small class="text-gray-400 text-xs mt-1 block">Để bảo mật, địa chỉ email không thể thay đổi.</small>
    </div>

    <div class="mb-8">
      <label class="block text-sm font-medium text-gray-700 mb-2">Họ và tên</label>
      <input 
        pInputText 
        formControlName="fullName" 
        class="w-full p-3" 
        [ngClass]="{'ng-invalid ng-dirty': infoForm.get('fullName')?.invalid && infoForm.get('fullName')?.touched}"
        placeholder="Nhập họ tên của bạn" />
      
      <small *ngIf="infoForm.get('fullName')?.hasError('required') && infoForm.get('fullName')?.touched" class="text-red-500 mt-1 block">
        Vui lòng nhập họ tên.
      </small>
      <small *ngIf="infoForm.get('fullName')?.hasError('minlength') && infoForm.get('fullName')?.touched" class="text-red-500 mt-1 block">
        Tên phải có ít nhất 2 ký tự.
      </small>
    </div>

    <div class="pt-2">
      <button 
        pButton 
        label="Lưu thay đổi" 
        type="submit" 
        icon="pi pi-check"
        [loading]="isLoading"
        [disabled]="infoForm.invalid || isLoading"
        class="bg-pink-600 border-pink-600 hover:bg-pink-700 px-6 py-2.5 w-full sm:w-auto">
      </button>
    </div>

  </form>
</div>